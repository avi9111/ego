// Generated by CoffeeScript 1.12.7
(function() {
  var Api, DeviceCreater, Modal, React, antd;

  antd = require('antd');

  React = require('react');

  Modal = antd.Modal;

  Api = require('../api/api_ajax');

  DeviceCreater = React.createClass({displayName: "DeviceCreater",
    getInitialState: function() {
      return {
        loading: false,
        visible: false,
        user_id: "",
        name: ""
      };
    },
    showModal: function() {
      return this.setState({
        visible: true
      });
    },
    handleOk: function() {
      this.setState({
        loading: true
      });
      this.setState({
        loading: false,
        visible: false
      });
      return this.send();
    },
    handleCancel: function() {
      return this.setState({
        visible: false
      });
    },
    send: function() {
      var api;
      api = new Api();
      console.log(this.state.send);
      return api.Typ("createDeviceForUID").ServerID("SID").AccountID(this.state.user_id).Key(this.props.curr_key).Params(this.state.name).Do((function(_this) {
        return function(result) {
          console.log("on createDeviceForUID");
          return console.log(result);
        };
      })(this));
    },
    handleUserIDChange: function(event) {
      return this.setState({
        user_id: event.target.value
      });
    },
    handleDeviceIDChange: function(event) {
      return this.setState({
        name: event.target.value
      });
    },
    render: function() {
      var base;
      return React.createElement("div", null, React.createElement("button", {
        "className": "ant-btn ant-btn-primary",
        "onClick": this.showModal
      }, "绑定UID到DeviceID"), React.createElement(Modal, {
        "ref": "modal",
        "visible": this.state.visible,
        "title": "绑定DeviceID到用户名",
        "onOk": this.handleOk,
        "onCancel": this.handleCancel,
        "width": 700,
        "footer": [
          React.createElement("button", {
            "key": "back",
            "className": "ant-btn",
            "onClick": this.handleCancel
          }, "返 回"), React.createElement("button", {
            "key": "submit",
            "className": "ant-btn ant-btn-primary",
            "onClick": this.handleOk
          }, "提 交", React.createElement("i", {
            "className": 'anticon anticon-loading' + (typeof (base = this.state).loading === "function" ? base.loading({
              '': 'hide'
            }) : void 0)
          }))
        ]
      }, React.createElement("div", null, "注意:绑定UID到DeviceID之前要查询DeviceID是否存在, 如果存在请备份UID记录, 当DeviceID已存在时会覆盖原有的"), React.createElement("div", {
        "className": "row-flex row-flex-middle row-flex-start"
      }, React.createElement("div", null, "UserID(xx-xx-xx):"), React.createElement("input", {
        "className": "ant-input ",
        "onChange": this.handleUserIDChange
      })), React.createElement("div", {
        "className": "row-flex row-flex-middle row-flex-start"
      }, React.createElement("div", null, "DeviceID:"), React.createElement("input", {
        "className": "ant-input ",
        "onChange": this.handleDeviceIDChange
      }))));
    }
  });

  module.exports = DeviceCreater;

}).call(this);
