// Generated by CoffeeScript 1.12.7
(function() {
  var AccountKeyInput, Api, App, React, antd;

  antd = require('antd');

  React = require('react');

  AccountKeyInput = require('../../common/account_input');

  Api = require('../api/api_ajax');

  App = React.createClass({displayName: "App",
    getInitialState: function() {
      return {
        select_server: this.props.curr_server,
        player_to_send: ""
      };
    },
    isServerRight: function() {
      return (this.state.select_server != null) && (this.state.select_server.serverName != null);
    },
    isAccountRight: function() {
      return (this.refs.accountin != null) && this.refs.accountin.IsRight();
    },
    getLoadingState: function() {
      if (!this.isServerRight() || !this.isAccountRight()) {
        return "disabled";
      }
      return '';
    },
    handleServerChange: function(data) {
      console.log(data);
      this.setState({
        select_server: data
      });
      return setTimeout(this.OnSend, 100);
    },
    handleUserChange: function(data) {
      console.log(data);
      if (data === "") {
        data = "请输入玩家Id";
      }
      return this.setState({
        player_to_send: data
      });
    },
    OnSend: function() {
      return console.log("SendOver");
    },
    getServerName: function() {
      if (this.state.select_server != null) {
        return this.state.select_server.name;
      } else {
        return "";
      }
    },
    ban: function() {
      var api;
      api = new Api();
      return api.Typ("gagAccount").ServerID(this.state.select_server.serverName).AccountID(this.state.player_to_send).Key(this.props.curr_key).Params(60).Do((function(_this) {
        return function(result) {
          console.log("onSend");
          console.log(result);
          return _this.props.onSend();
        };
      })(this));
    },
    render: function() {
      return React.createElement("div", null, React.createElement(AccountKeyInput, Object.assign({}, this.props, {
        "ref": "accountin",
        "can_cb": this.handleUserChange
      })), React.createElement(antd.Button, {
        "className": 'ant-btn anticon-search ant-btn-primary ' + this.getLoadingState(),
        "onClick": this.ban
      }, "账号禁言1分钟"));
    }
  });

  module.exports = App;

}).call(this);
